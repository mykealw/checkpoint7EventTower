import{h,u as T,A as S,c as m,a as C,o as c,b as a,d as t,g as b,j as I,w as f,v as k,F as v,B as x,q as M,s as D,e as N,t as _,x as p}from"./vendor.95959a42.js";import{_ as V,e as E,l as u,P as l,A as d,a as j}from"./index.a9d18e7e.js";import{t as w}from"./TicketsService.15d85a3a.js";const P={name:"Account",setup(){const i=h(!1),o=h({}),g=T();return S(async()=>{try{await E.getAllEvents(),await w.getMyTickets()}catch(e){u.log(e),l.toast(e.message,"error")}}),{edit:o,editing:i,account:m(()=>d.account),myEvents:m(()=>d.myEvents),myTickets:m(()=>d.myTickets),async editAccount(){try{o.value.name||(o.value.name=d.account.name),o.value.picture||(o.value.picture=d.account.picture),await j.editAccount(o.value),l.toast("Account updated","success")}catch(e){u.log("[error prefix]",e.message),l.toast(e.message,"error")}},async goTo(e){try{await E.getActiveEvent(e),g.push({name:"Event",params:{id:d.activeEvent.id}})}catch(r){u.log(r),l.toast(r.message,"error")}},async deleteTicket(e){try{await l.confirm()&&await w.deleteTicket(e)}catch(r){u.log(r),l.toast(r.message,"error")}}}}},n=i=>(M("data-v-e594c50c"),i=i(),D(),i),B={class:"row"},U={key:0,class:"col-md-12"},F=p(" Edit Account "),L=n(()=>t("i",{class:"ms-2 mdi mdi-account-edit-outline"},null,-1)),R=[F,L],q={class:"m-2"},z=n(()=>t("label",{for:"name",class:"form-label visually-hidden"},"Name",-1)),G={class:"m-2"},H=n(()=>t("label",{for:"picture",class:"form-label visually-hidden"},"Picture",-1)),J=n(()=>t("button",{class:"btn bg-success ms-2",title:"Submit"},"Submit",-1)),K={class:"about row"},O=n(()=>t("h4",{class:"text-success picfont my-auto"},"My Events",-1)),Q={class:"row"},W=n(()=>t("h4",{class:"text-success picfont my-auto"},"Upcoming Events",-1)),X={class:"d-flex m-3 ticlen rounded bg-dark"},Y=["onClick","title","src","alt"],Z={class:"picfont p-2"},$=n(()=>t("br",null,null,-1)),ee={class:"text-success"},te=n(()=>t("br",null,null,-1)),se=n(()=>t("br",null,null,-1)),oe=["onClick"];function ne(i,o,g,e,r,ce){const A=C("MyEvents");return c(),a(v,null,[t("div",B,[e.editing!==!0?(c(),a("div",U,[t("h5",{class:"selectable p-2 border border-dark m-2 bg-primary rounded text-center",onClick:o[0]||(o[0]=s=>e.editing=!e.editing),title:"Edit Account"},R)])):b("",!0),e.editing==!0?(c(),a("form",{key:1,class:"p-3",onSubmit:o[4]||(o[4]=I(s=>e.editAccount(),["prevent"]))},[t("div",q,[z,f(t("input",{type:"text",class:"form-control",id:"name","aria-describedby":"helpId",placeholder:"Name..","onUpdate:modelValue":o[1]||(o[1]=s=>e.edit.name=s)},null,512),[[k,e.edit.name]])]),t("div",G,[H,f(t("input",{type:"text",class:"form-control",id:"name","aria-describedby":"picture url input",placeholder:"picture URL...","onUpdate:modelValue":o[2]||(o[2]=s=>e.edit.picture=s)},null,512),[[k,e.edit.picture]])]),t("div",null,[t("button",{class:"btn bg-danger",onClick:o[3]||(o[3]=s=>e.editing=!e.editing),title:"Cancel"}," Cancel "),J])],32)):b("",!0)]),t("div",K,[O,(c(!0),a(v,null,x(e.myEvents,s=>(c(),a("div",{class:"col-md-3",key:s.id},[N(A,{myEvent:s,onClick:y=>e.goTo(s.id)},null,8,["myEvent","onClick"])]))),128))]),t("div",Q,[W,(c(!0),a(v,null,x(e.myTickets,s=>(c(),a("div",{class:"col-md-6 d-flex jcsa",key:s.id},[t("div",X,[t("img",{onClick:y=>e.goTo(s.eventId),class:"ticpic rounded",title:s.event.name,src:s.event.coverImg,alt:s.event.name},null,8,Y),t("h4",Z,[t("b",null,_(s.event.name),1),$,t("span",ee,[p(_(s.event.location)+" ",1),te,p(" "+_(new Date(s.event.startDate).toDateString()),1)]),se,t("button",{class:"btn btn-danger",onClick:y=>e.deleteTicket(s.id)}," Delete Ticket ",8,oe)])])]))),128))])],64)}var le=V(P,[["render",ne],["__scopeId","data-v-e594c50c"]]);export{le as default};
